# 程序设计文档

## 数据模型设计
```
新增：学校实体、专业实体、学校-专业关系
待完善：举报、申请
```
| 日期 | 修改内容      |
| ---- | ------------- |
| 4.9  | 修改xxx       |
| 4.17 | 增加用户token |
| 4.17 | 修改表picture为image, 修改字段为url |

#### 实体

**用户信息(user_info)**
(<u>用户编号</u>, 用户名，用户密码，用户手机号，用户邮箱，用户专业，用户学届，图片编号，用户个人签名)

| 名称            | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能               |
| --------------- | -------- | ---- | -------- | -------- | ------------------ |
| user_id         | Integer  | 32   | 是       | 是       | 用户登录id         |
| password        | Varchar  | 64   | 是       | 否       | 登录密码           |
| name            | Varchar  | 64   | 是       | 否       | 昵称               |
| phone_number    | Char     | 11   | 否       | 否       | 联系电话           |
| email           | Varchar  | 64   | 否       | 否       | 联系邮箱           |
| major           | Varchar  | 64   | 否       | 否       | 专业               |
| enrollment_year | Integer  | 32   | 否       | 否       | 入学年份           |
| photo           | Varchar  | 256  | 否       | 否       | 用户头像(图片位置) |
| sign            | Varchar  | 256  | 否       | 否       | 用户签名           |
| token           | Char     | 64   | 否       | 否       | 用户当前登录token  |
| token_time      | Integer  |      | 否       | 否       | 用户token生成时间  |

**学业版块(section)**
(<u>版块编号</u>，版块名称，课程简介，课程类别，开课院系)

| 名称       | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能     |
| ---------- | -------- | ---- | -------- | -------- | -------- |
| section_id | Integer  | 32   | 是       | 是       | 版块id   |
| name       | Varchar  | 64   | 是       | 否       | 版块名称 |
| intro      | Text     |      | 否       | 否       | 课程简介 |
| category   | Varchar  | 64   | 否       | 否       | 课程类别 |
| faculty    | Varchar  | 64   | 否       | 否       | 开课院系 |

**学校(school)**
(<u>学校编号</u>，学校名称，学校简介，学校类别，学校网站链接)
| 名称      | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能         |
| --------- | -------- | ---- | -------- | -------- | ------------ |
| school_id | Integer  | 32   | 是       | 是       | 学校id       |
| name      | Varchar  | 64   | 是       | 否       | 学校名称     |
| intro     | Text     |      | 否       | 否       | 学校简介     |
| category  | Varchar  | 64   | 否       | 否       | 学校类别     |
| web       | Varchar  | 256  | 否       | 否       | 学校网站链接 |

**专业(major)**
(<u>专业编号</u>，专业名称，专业代码)
| 名称     | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能     |
| -------- | -------- | ---- | -------- | -------- | -------- |
| major_id | Integer  | 32   | 是       | 是       | 专业id   |
| name     | Varchar  | 64   | 是       | 否       | 专业名称 |
| code     | Varchar  | 64   | 是       | 否       | 专业代码 |

**帖子(post)**
(<u>帖子编号</u>，帖子标题，帖子内容，帖子类型，发帖时间，点赞数量，收藏数量，评论数量，浏览数量，版块编号，发帖用户编号)

| 名称          | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能         |
| ------------- | --------- | ---- | -------- | -------- | ------------ |
| post_id       | Integer   | 32   | 是       | 是       | 帖子id       |
| title         | Varchar   | 64   | 是       | 否       | 帖子标题     |
| content       | Text      |      | 否       | 否       | 帖子内容     |
| category      | Varchar   | 64   | 是       | 否       | 帖子类型     |
| time          | Date Time |      | 是       | 否       | 发帖时间     |
| like_count    | Integer   | 32   | 是       | 否       | 点赞数量     |
| collect_count | Integer   | 32   | 是       | 否       | 收藏数量     |
| comment_count | Integer   | 32   | 是       | 否       | 评论数量     |
| view_count    | Integer   | 32   | 是       | 否       | 浏览数量     |
| section_id    | Integer   | 32   | 否       | 否       | 版块编号     |
| user_id       | Integer   | 32   | 是       | 否       | 发贴用户编号 |

**评论(comment)**
(<u>评论编号</u>，用户编号，评论内容，帖子编号，评论时间，评论类型，被评论帖子编号，被评论评论编号，点赞数量，评论数量)

| 名称          | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能           |
| ------------- | --------- | ---- | -------- | -------- | -------------- |
| comment_id    | Integer   | 32   | 是       | 是       | 评论id         |
| post_id       | Integer   | 32   | 是       | 否       | 帖子编号       |
| user_id       | Integer   | 32   | 是       | 否       | 用户编号       |
| content       | Text      |      | 是       | 否       | 评论内容       |
| category      | Varchar   | 64   | 是       | 否       | 评论类型       |
| time          | Date Time |      | 是       | 否       | 评论时间       |
| posted_id     | Integer   | 32   | 是       | 否       | 被评论帖子编号 |
| commented_id  | Integer   | 32   | 是       | 否       | 被评论评论编号 |
| like_count    | Integer   | 32   | 是       | 否       | 点赞数量       |
| comment_count | Integer   | 32   | 是       | 否       | 评论数量       |

**资源(resourse)**
(<u>资源编号</u>，资源名称，上传用户编号，资源类型，上传时间，路径)

| 名称        | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能         |
| ----------- | --------- | ---- | -------- | -------- | ------------ |
| resourse_id | Integer   | 32   | 是       | 是       | 资源id       |
| name        | Varchar   | 64   | 是       | 否       | 资源名称     |
| user_id     | Integer   | 32   | 是       | 否       | 上传用户编号 |
| path        | Varchar   | 256  | 是       | 否       | 路径         |
| category    | Varchar   | 64   | 是       | 否       | 资源类型     |
| time        | Date Time |      | 是       | 否       | 上传时间     |

**举报(report)（待完善）**
(<u>举报编号</u>，举报人编号，举报内容，被举报信息类型，被举报信息编号)
| 名称      | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能           |
| --------- | -------- | ---- | -------- | -------- | -------------- |
| report_id | Integer  | 32   | 是       | 是       | 举报id         |
| content   | Text     |      | 是       | 否       | 举报内容       |
| user_id   | Integer  | 32   | 是       | 否       | 举报人编号     |
| category  | Varchar  | 64   | 是       | 否       | 被举报信息类型 |
| info_id   | Integer  | 32   | 是       | 否       | 被举报信息编号 |

**申请(apply)**
(<u>申请编号</u>，用户编号，申请类型，板块名称，课程简介，课程类别，开课院系，补充说明)

| 名称              | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能     |
| ----------------- | -------- | ---- | -------- | -------- | -------- |
| apply_id          | Integer  | 32   | 是       | 是       | 申请id   |
| user_id           | Integer  | 32   | 是       | 否       | 用户编号 |
| category          | Varchar  | 64   | 是       | 否       | 申请类型 |
| section_name      | Varchar  | 64   | 是       | 否       | 版块名称 |
| section_intro     | Text     |      | 是       | 否       | 课程简介 |
| section_category  | Varchar  | 64   | 是       | 否       | 课程类别 |
| section_faculty   | Varchar  | 64   | 是       | 否       | 开课院系 |
| additional_remark | Text     |      | 否       | 否       | 补充说明 |

**私信(private_message)**
(<u>私信编号</u>，私信内容，发送者编号，接收者编号，私信时间)
| 名称               | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能       |
| ------------------ | --------- | ---- | -------- | -------- | ---------- |
| privite_message_id | Integer   | 32   | 是       | 是       | 私信id     |
| content            | Text      |      | 是       | 否       | 私信内容   |
| send_id            | Integer   | 32   | 是       | 否       | 发送者编号 |
| receive_id         | Integer   | 32   | 是       | 否       | 接收者编号 |
| time               | Date Time |      | 是       | 否       | 私信时间   |

**学习团体(group)**
(<u>学习团体编号</u>，学习团体名称，发起人编号，团体人数，团体介绍内容，团体限制人数，是否需要申请加入)
| 名称          | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能             |
| ------------- | -------- | ---- | -------- | -------- | ---------------- |
| group_id      | Integer  | 32   | 是       | 是       | 学习团体id       |
| name          | Varchar  | 64   | 是       | 否       | 学习团体名称     |
| promoter_id   | Integer  | 32   | 是       | 否       | 发起人编号       |
| member_count  | Integer  | 32   | 是       | 否       | 团体人数         |
| content       | Text     |      | 是       | 否       | 团体内容介绍     |
| permitted_num | Integer  | 32   | 否       | 否       | 团体限制人数     |
| is_examine    | tinyint  |      | 是       | 否       | 是否需要申请加入 |

**团体消息(group_message)**
(<u>消息编号</u>，消息内容，学习团体编号，发送者编号，消息时间)
| 名称             | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能         |
| ---------------- | --------- | ---- | -------- | -------- | ------------ |
| group_message_id | Integer   | 32   | 是       | 是       | id           |
| content          | Text      |      | 是       | 否       | 消息内容     |
| group_id         | Integer   | 32   | 是       | 否       | 学习团体编号 |
| send_id          | Integer   | 32   | 是       | 否       | 发送者编号   |
| time             | Date Time |      | 是       | 否       | 消息时间     |

**打卡信息(clock_in)**
(<u>打卡编号</u>，打卡内容，打卡时间，点赞数量，评论数量，浏览数量)
| 名称          | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能     |
| ------------- | --------- | ---- | -------- | -------- | -------- |
| clock_in_id   | Integer   | 32   | 是       | 是       | 打卡id   |
| content       | Text      |      | 是       | 否       | 打卡内容 |
| time          | Date Time |      | 是       | 否       | 打卡时间 |
| like_count    | Integer   | 32   | 是       | 否       | 点赞数量 |
| comment_count | Integer   | 32   | 是       | 否       | 评论数量 |
| view_count    | Integer   | 32   | 是       | 否       | 浏览数量 |

**图片(image)**
(<u>图片编号</u>，图片url)
| 名称       | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能     |
| ---------- | -------- | ---- | -------- | -------- | -------- |
| image_id | Integer  | 32   | 是       | 是       | 图片id   |
| url   | Varchar  | 256  | 是       | 否       | 图片位置 |

**Tag(tag)**
(<u>Tag编号</u>，Tag名称)
| 名称   | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能    |
| ------ | -------- | ---- | -------- | -------- | ------- |
| tag_id | Integer  | 32   | 是       | 是       | Tagid   |
| name   | Varchar  | 64   | 是       | 否       | Tag名称 |

#### 关系

**课程-教师(course_teacher)**

(<u>编号</u>，课程版块编号，教师名称，教师简介)
| 名称          | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能        |
| ------------- | -------- | ---- | -------- | -------- | ----------- |
| ct_id         | Integer  | 32   | 是       | 是       | 课程-教师id |
| section_id    | Integer  | 32   | 是       | 否       | 课程版块id  |
| teacher_name  | Varchar  | 64   | 是       | 否       | 教师名称    |
| teacher_intro | Text     |      | 否       | 否       | 教师简介    |

**版块权限(authority)**
(<u>编号</u>，版块编号，用户编号，权限类别)
| 名称         | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能       |
| ------------ | -------- | ---- | -------- | -------- | ---------- |
| authority_id | Integer  | 32   | 是       | 是       | 版块权限id |
| section_id   | Integer  | 32   | 是       | 否       | 版块id     |
| user_id      | Integer  | 32   | 是       | 否       | 用户id     |
| category     | Varchar  | 64   | 是       | 否       | 权限类别   |

**学校-专业(school-major)**
(<u>编号</u>，学校编号，专业编号，专业基础信息，招生院系，考试科目，分数线)
| 名称      | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能         |
| --------- | -------- | ---- | -------- | -------- | ------------ |
| sm_id     | Integer  | 32   | 是       | 是       | 学校-专业id  |
| school_id | Integer  | 32   | 是       | 否       | 学校id       |
| major_id  | Integer  | 32   | 是       | 否       | 专业id       |
| info      | Text     |      | 否       | 否       | 专业基础信息 |
| faculty   | Varchar  | 64   | 否       | 否       | 招生院系     |
| subject   | Text     |      | 否       | 否       | 考试科目     |
| line      | Text     |      | 否       | 否       | 分数线       |


**帖子-图片(post_picture)**
(<u>编号</u>，帖子编号，图片编号)
| 名称       | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能        |
| ---------- | -------- | ---- | -------- | -------- | ----------- |
| pp_id      | Integer  | 32   | 是       | 是       | 帖子-图片id |
| post_id    | Integer  | 32   | 是       | 否       | 帖子id      |
| picture_id | Integer  | 32   | 是       | 否       | 图片id      |

**打卡-图片(clockin_picture)**
(<u>编号</u>，打卡编号，图片编号)
| 名称        | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能        |
| ----------- | -------- | ---- | -------- | -------- | ----------- |
| cp_id       | Integer  | 32   | 是       | 是       | 打卡-图片id |
| clock_in_id | Integer  | 32   | 是       | 否       | 打卡id      |
| picture_id  | Integer  | 32   | 是       | 否       | 图片id      |

**帖子-资源(post_resourse)**
(<u>编号</u>，帖子编号，资源编号)
| 名称        | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能        |
| ----------- | -------- | ---- | -------- | -------- | ----------- |
| pr_id       | Integer  | 32   | 是       | 是       | 帖子-资源id |
| post_id     | Integer  | 32   | 是       | 否       | 帖子id      |
| resourse_id | Integer  | 32   | 是       | 否       | 资源id      |

**帖子-Tag(post_tag)**
(<u>编号</u>，帖子编号，Tag编号)
| 名称    | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能       |
| ------- | -------- | ---- | -------- | -------- | ---------- |
| pt_id   | Integer  | 32   | 是       | 是       | 帖子-Tagid |
| post_id | Integer  | 32   | 是       | 否       | 帖子id     |
| tag_id  | Integer  | 32   | 是       | 否       | Tagid      |

**学习团体-Tag(group_tag)**
(<u>编号</u>，学习团体编号，Tag编号)
| 名称     | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能           |
| -------- | -------- | ---- | -------- | -------- | -------------- |
| gt_id    | Integer  | 32   | 是       | 是       | 学习团体-Tagid |
| group_id | Integer  | 32   | 是       | 否       | 学习团体id     |
| tag_id   | Integer  | 32   | 是       | 否       | Tagid          |

**申请加入学习团体(apply_group)**
(<u>编号</u>，用户编号，学习团体编号，申请内容)
| 名称     | 数据类型 | 大小 | 是否必填 | 是否主键 | 功能               |
| -------- | -------- | ---- | -------- | -------- | ------------------ |
| ag_id    | Integer  | 32   | 是       | 是       | 申请加入学习团体id |
| user_id  | Integer  | 32   | 是       | 否       | 用户id             |
| group_id | Integer  | 32   | 是       | 否       | 学习团体id         |
| content  | Text     |      | 否       | 否       | 申请内容           |

**收藏(collect)**
(<u>收藏编号</u>，用户编号，收藏帖子编号，收藏时间)
| 名称       | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能       |
| ---------- | --------- | ---- | -------- | -------- | ---------- |
| collect_id | Integer   | 32   | 是       | 是       | 收藏id     |
| user_id    | Integer   | 32   | 是       | 否       | 用户id     |
| post_id    | Integer   | 32   | 是       | 否       | 收藏帖子id |
| time       | Date Time |      | 是       | 否       | 收藏时间   |

**用户-关注(user_follow)**
(<u>编号</u>，用户编号，被关注用户编号，关注时间)
| 名称        | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能         |
| ----------- | --------- | ---- | -------- | -------- | ------------ |
| uf_id       | Integer   | 32   | 是       | 是       | 用户-关注id  |
| user_id     | Integer   | 32   | 是       | 否       | 用户id       |
| followed_id | Integer   | 32   | 是       | 否       | 被关注用户id |
| time        | Date Time |      | 是       | 否       | 关注时间     |

**版块-关注(section_follow)**
(<u>编号</u>，用户编号，被关注版块编号，关注时间)
| 名称       | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能         |
| ---------- | --------- | ---- | -------- | -------- | ------------ |
| sf_id      | Integer   | 32   | 是       | 是       | 版块-关注id  |
| user_id    | Integer   | 32   | 是       | 否       | 用户id       |
| section_id | Integer   | 32   | 是       | 否       | 被关注版块id |
| time       | Date Time |      | 是       | 否       | 关注时间     |

**帖子-点赞(post_like)**
(<u>编号</u>，用户编号，帖子编号，点赞时间)
| 名称    | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能        |
| ------- | --------- | ---- | -------- | -------- | ----------- |
| pl_id   | Integer   | 32   | 是       | 是       | 帖子-点赞id |
| user_id | Integer   | 32   | 是       | 否       | 用户id      |
| post_id | Integer   | 32   | 是       | 否       | 帖子id      |
| time    | Date Time |      | 是       | 否       | 点赞时间    |

**评论-点赞(comment_like)**
(<u>编号</u>，用户编号，评论编号，点赞时间)
| 名称       | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能        |
| ---------- | --------- | ---- | -------- | -------- | ----------- |
| cl_id      | Integer   | 32   | 是       | 是       | 评论-点赞id |
| user_id    | Integer   | 32   | 是       | 否       | 用户id      |
| comment_id | Integer   | 32   | 是       | 否       | 评论id      |
| time       | Date Time |      | 是       | 否       | 点赞时间    |

**打卡-点赞(clockin_like)**
(<u>编号</u>，用户编号，打卡编号，点赞时间)

| 名称        | 数据类型  | 大小 | 是否必填 | 是否主键 | 功能        |
| ----------- | --------- | ---- | -------- | -------- | ----------- |
| cil_id      | Integer   | 32   | 是       | 是       | 打卡-点赞id |
| user_id     | Integer   | 32   | 是       | 否       | 用户id      |
| clock_in_id | Integer   | 32   | 是       | 否       | 打卡id      |
| time        | Date Time |      | 是       | 否       | 点赞时间    |



### 建表语句

```sql
-- 用户信息表
CREATE TABLE user_info
(
    user_id       INT AUTO_INCREMENT PRIMARY KEY,
    account       VARCHAR(64) NOT NULL UNIQUE ,
    password      VARCHAR(64) NOT NULL,
    name          VARCHAR(64) NOT NULL,
    phonenum      CHAR(11),
    email         VARCHAR(64),
    major         VARCHAR(64),
    graduate_year INT,
    photo         VARCHAR(256),
    sign          VARCHAR(256),
    token         CHAR(64),
    token_time    INT
);

-- 学业版块表
CREATE TABLE section
(
    section_id INT AUTO_INCREMENT PRIMARY KEY,
    name       VARCHAR(64) NOT NULL,
    intro      TEXT,
    category   VARCHAR(64),
    faculty    VARCHAR(64)
);

-- 学校表
CREATE TABLE school
(
    school_id INT AUTO_INCREMENT PRIMARY KEY,
    name      VARCHAR(64) NOT NULL,
    intro     TEXT,
    category  VARCHAR(64),
    web       VARCHAR(256)
);

-- 专业表
CREATE TABLE major
(
    major_id INT AUTO_INCREMENT PRIMARY KEY,
    name     VARCHAR(64) NOT NULL,
    code     VARCHAR(64) NOT NULL
);

-- 帖子表
CREATE TABLE post
(
    post_id       INT AUTO_INCREMENT PRIMARY KEY,
    title         VARCHAR(64) NOT NULL,
    content       TEXT,
    category      VARCHAR(64) NOT NULL,
    time          DATETIME    NOT NULL,
    like_count    INT,
    collect_count INT,
    comment_count INT,
    view_count    INT,
    section_id    INT,
    user_id       INT,
    FOREIGN KEY (section_id) REFERENCES section (section_id),
    FOREIGN KEY (user_id) REFERENCES user_info (user_id)
);

-- 评论表
CREATE TABLE comment
(
    comment_id    INT AUTO_INCREMENT PRIMARY KEY,
    post_id       INT,
    user_id       INT,
    content       TEXT        NOT NULL,
    category      VARCHAR(64) NOT NULL,
    time          DATETIME    NOT NULL,
    posted_id     INT,
    commented_id  INT,
    like_count    INT,
    comment_count INT,
    FOREIGN KEY (post_id) REFERENCES post (post_id),
    FOREIGN KEY (user_id) REFERENCES user_info (user_id)
);

-- 资源表
CREATE TABLE resource
(
    resource_id INT AUTO_INCREMENT PRIMARY KEY,
    name        VARCHAR(64)  NOT NULL,
    user_id     INT,
    path        VARCHAR(256) NOT NULL,
    category    VARCHAR(64)  NOT NULL,
    time        DATETIME     NOT NULL,
    FOREIGN KEY (user_id) REFERENCES user_info (user_id)
);

-- 举报表
CREATE TABLE report
(
    report_id INT AUTO_INCREMENT PRIMARY KEY,
    content   TEXT        NOT NULL,
    user_id   INT,
    category  VARCHAR(64) NOT NULL,
    info_id   INT,
    FOREIGN KEY (user_id) REFERENCES user_info (user_id)
);

-- 申请表
CREATE TABLE apply
(
    apply_id          INT AUTO_INCREMENT PRIMARY KEY,
    user_id           INT,
    category          VARCHAR(64) NOT NULL,
    section_name      VARCHAR(64) NOT NULL,
    section_intro     TEXT        NOT NULL,
    section_category  VARCHAR(64) NOT NULL,
    section_faculty   VARCHAR(64) NOT NULL,
    additional_remark TEXT,
    FOREIGN KEY (user_id) REFERENCES user_info (user_id)
);

-- 私信表
CREATE TABLE private_message
(
    private_message_id INT AUTO_INCREMENT PRIMARY KEY,
    content            TEXT     NOT NULL,
    send_id            INT,
    receive_id         INT,
    time               DATETIME NOT NULL,
    FOREIGN KEY (send_id) REFERENCES user_info (user_id),
    FOREIGN KEY (receive_id) REFERENCES user_info (user_id)
);

-- 学习团体表
CREATE TABLE study_group
(
    group_id      INT AUTO_INCREMENT PRIMARY KEY,
    name          VARCHAR(64) NOT NULL,
    promoter_id   INT,
    member_count  INT,
    content       TEXT,
    permitted_num INT,
    is_examine    TINYINT,
    FOREIGN KEY (promoter_id) REFERENCES user_info (user_id)
);

-- 团体消息表
CREATE TABLE group_message
(
    group_message_id INT AUTO_INCREMENT PRIMARY KEY,
    content          TEXT     NOT NULL,
    group_id         INT,
    send_id          INT,
    time             DATETIME NOT NULL,
    FOREIGN KEY (group_id) REFERENCES study_group (group_id),
    FOREIGN KEY (send_id) REFERENCES user_info (user_id)
);

-- 打卡信息表
CREATE TABLE clock_in
(
    clock_in_id   INT AUTO_INCREMENT PRIMARY KEY,
    content       TEXT     NOT NULL,
    time          DATETIME NOT NULL,
    like_count    INT,
    comment_count INT,
    view_count    INT
);

-- 图片表
CREATE TABLE picture
(
    picture_id INT AUTO_INCREMENT PRIMARY KEY,
    location   VARCHAR(256) NOT NULL
);

-- Tag表
CREATE TABLE tag
(
    tag_id INT AUTO_INCREMENT PRIMARY KEY,
    name   VARCHAR(64) NOT NULL
);

-- 课程-教师表
CREATE TABLE course_teacher
(
    ct_id         INT AUTO_INCREMENT PRIMARY KEY,
    section_id    INT,
    teacher_name  VARCHAR(64) NOT NULL,
    teacher_intro TEXT,
    FOREIGN KEY (section_id) REFERENCES section (section_id)
);

-- 版块权限表
CREATE TABLE authority
(
    authority_id INT AUTO_INCREMENT PRIMARY KEY,
    section_id   INT,
    user_id      INT,
    category     VARCHAR(64) NOT NULL,
    FOREIGN KEY (section_id) REFERENCES section (section_id),
    FOREIGN KEY (user_id) REFERENCES user_info (user_id)
);

-- 学校-专业表
CREATE TABLE school_major
(
    sm_id     INT AUTO_INCREMENT PRIMARY KEY,
    school_id INT,
    major_id  INT,
    info      TEXT,
    faculty   VARCHAR(64),
    subject   TEXT,
    line      TEXT,
    FOREIGN KEY (school_id) REFERENCES school (school_id),
    FOREIGN KEY (major_id) REFERENCES major (major_id)
);

-- 帖子-图片表
CREATE TABLE post_picture
(
    pp_id      INT AUTO_INCREMENT PRIMARY KEY,
    post_id    INT,
    picture_id INT,
    FOREIGN KEY (post_id) REFERENCES post (post_id),
    FOREIGN KEY (picture_id) REFERENCES picture (picture_id)
);

-- 打卡-图片表
CREATE TABLE clockin_picture
(
    cp_id       INT AUTO_INCREMENT PRIMARY KEY,
    clock_in_id INT,
    picture_id  INT,
    FOREIGN KEY (clock_in_id) REFERENCES clock_in (clock_in_id),
    FOREIGN KEY (picture_id) REFERENCES picture (picture_id)
);

-- 帖子-资源表
CREATE TABLE post_resource
(
    pr_id       INT AUTO_INCREMENT PRIMARY KEY,
    post_id     INT,
    resource_id INT,
    FOREIGN KEY (post_id) REFERENCES post (post_id),
    FOREIGN KEY (resource_id) REFERENCES resource (resource_id)
);

-- 帖子-Tag表
CREATE TABLE post_tag
(
    pt_id   INT AUTO_INCREMENT PRIMARY KEY,
    post_id INT,
    tag_id  INT,
    FOREIGN KEY (post_id) REFERENCES post (post_id),
    FOREIGN KEY (tag_id) REFERENCES tag (tag_id)
);

-- 学习团体-Tag表
CREATE TABLE group_tag
(
    gt_id    INT AUTO_INCREMENT PRIMARY KEY,
    group_id INT,
    tag_id   INT,
    FOREIGN KEY (group_id) REFERENCES study_group (group_id),
    FOREIGN KEY (tag_id) REFERENCES tag (tag_id)
);

-- 申请加入学习团体表
CREATE TABLE apply_group
(
    ag_id    INT AUTO_INCREMENT PRIMARY KEY,
    user_id  INT,
    group_id INT,
    content  TEXT,
    FOREIGN KEY (user_id) REFERENCES user_info (user_id),
    FOREIGN KEY (group_id) REFERENCES study_group (group_id)
);

-- 收藏表
CREATE TABLE collect
(
    collect_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id    INT,
    post_id    INT,
    FOREIGN KEY (user_id) REFERENCES user_info (user_id),
    FOREIGN KEY (post_id) REFERENCES post (post_id)
)

```




## 界面设计